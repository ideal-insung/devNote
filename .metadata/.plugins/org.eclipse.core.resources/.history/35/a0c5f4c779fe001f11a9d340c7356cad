package sort;

public class HeapSort {

	public static void heapSort(int[] data) {
		heapSort(data,data.length);
	}
	public static void heapSort(int[] data, int size) {
		if(data.length < 2) return;
		int parentIdx = data.length/2 - 1;
		int lastIdx = data.length -1;
		for(int i=parentIdx; i >=0 ; i--) {
			heapfiy(data,i,lastIdx);
		}
		for(int i=size-1; i>0;i--) {
			swap(data,0,i);
			lastIdx -- ;
			heapfiy(data,0,lastIdx);
		}
	}
	
	public static void heapfiy(int[] data, int parentIdx, int lastIdx) {
		int leftIdx = parentIdx * 2 + 1;
		int rightIdx = leftIdx +1;
		int largeIdx = -1;
		
		if(leftIdx <= lastIdx && data[leftIdx] > data[rightIdx]) {
			largeIdx = leftIdx;
		}else if(rightIdx <= lastIdx && data[leftIdx] <data[rightIdx]) {
			largeIdx = rightIdx;
		}
		
		if(largeIdx != -1 && data[largeIdx] > data[parentIdx]) {
			swap(data,largeIdx,parentIdx);
			heapfiy(data, largeIdx, lastIdx);
		}
	}
	
	public static void swap(int data[], int i , int j) {
		int temp; // swap 하기 위한  temp 데이터
		temp    = data[i]; 
		data[i] = data[j]; 
		data[j] = temp;
	}
	
	public static void printArray(int data[]) {
		for(int a : data) {
			System.out.print(a+",");
		}
	}
	
	public static void main(String[] args) {
		int []data = {1,3,2,4,6,5,7};
		heapSort(data);
		printArray(data);
	}
}
